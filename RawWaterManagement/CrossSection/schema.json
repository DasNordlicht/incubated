{
    "$schema": "http://json-schema.org/schema#",
    "$id": "# { todo } #",
    "title": "Open Channel Management - CrossSection ",
    "description": "This entity contains a harmonised description of a generic cross-section made for Open Channel Management (raw-water systems). CrossSection defines any point of the system where water-related properties are monitored or computed.",
    "type": "object",
      "properties": {
        "type": {
            "type": "string",
            "enum": ["CrossSection"],
            "description": "NGSI-LD Entity Type"
        },
        "tag": {
          "$ref": "../RawWaterManagement-schema.json#/definitions/tag"
        },
        "position": {
            "type": "number",
            "measuredFrom":{
              "type": "object",
              "description": "Description of relevant position of a cross section from a reference point (e.g., the most upstream point of the system)",
              "properties":{
                "$ref": "../RawWaterManagement-schema.json#/ngsildRelationship/properties"
              }
            }
        },
        "cross-section": {
            "$ref": "../RawWaterManagement-schema.json#/definitions/ngsildProperty"
        },"waterFlow": {
          "type": "number",
          "minimum" : "0",
          "description": "Rate of water flow in the cross-section"
        },"waterVelocity": {
          "type": "number",
          "minimum" : "0",
          "description": "Velocity in the cross-section"
        },"waterTemperature": {
          "type": "number",
          "description": "Quality parameter (temperature) in the cross-section"
        },"turbidity":{
          "type": "number",
          "minimum" : "0",
          "description": "Quality parameter (turbidity) in the cross-section"
        },"specificConductivity": {
          "type": "number",
          "minimum" : "0",
          "description": "Quality parameter (conductivity) in the cross-section"
        },"waterLevel": {
          "type": "number",
          "minimum" : "0",
          "description": "Water level in the cross-section"
        },"energyHead": {
          "type": "number",
          "description": "the energy head in the cross-section"
        },"CrossSectionGeometry": {
          "type": "string",
          "enum": ["Trapezoidal", "Circular"],
          "description": "Description of the geometry of a cross-section. Text defining the geometry of a CrossSection. Values restricted to 'Trapezoidal' or 'Circular'.",
          "properties":
          {
            "oneOf":[
              {
                "bottomSlope": {
                  "type": "number",
                  "minimum" : "0",
                  "description": "The bottom slope of the channel in the case of 'Trapezoidal' type. All units are accepted in CEFACT code"
                },"leftSideSlope": {
                    "type": "number",
                    "minimum" : "0",
                    "description": "The slope of the left bank of the channel in the case of 'Trapezoidal' type. All units are accepted in CEFACT code"
                },"rightSideSlope": {
                    "type": "number",
                    "minimum" : "0",
                    "description": "The slope of the right bank of the channel in the case of 'Trapezoidal' type. All units are accepted in CEFACT code"
                },"bottomWidth": {
                    "type": "number",
                    "minimum" : "0",
                    "description": "The bottom width of the channel in the case of 'Trapezoidal' type. All units are accepted in CEFACT code"
                },"diameter": {
                    "type": "number",
                    "minimum" : "0",
                    "description": "The diameter of a circular channel"
                },"maxWaterDepth": {
                    "type": "number",
                    "minimum" : "0",
                    "description": "The maximum allowable water depth of the channel. All units are accepted in CEFACT code"
                }
              },
              {
                "copiesFrom": {
                  "description": "URI of a Channel component from which the value of a property is obtained",
                  "type": "object",
                  "properties":{
                    "$ref": "../RawWaterManagement-schema.json#/ngsildRelationship/properties"
                  }
                }
              }
            ]
          }
        },
        "attachedTo":{
          "type": "object",
          "description": "A relationship to the ID of the channel where the cross-section 'lives in'. Reference to an entity of type Channel",
          "properties":{
            "$ref": "../RawWaterManagement-schema.json#/ngsildRelationship/properties"
        },
        "observedBy":{
          "type": "String",
          "description": "Relationship. Model:'https://smart-data-models.github.io/dataModel.Device/device-schema.json'",
          "format": "uri"
        }
    },
    "required": [
        "id",
        "name",
        "location"
    ]
}
