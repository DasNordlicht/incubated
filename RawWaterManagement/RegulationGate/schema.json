{
    "$schema": "http://json-schema.org/schema#",
    "$id": "# { todo } #",
    "title": "Greek National Water Company - Water Management System - Junction ",
    "description": "This entity contains a harmonised description of a generic “RegulationGate” made for raw-water supply management domain. Regulation structure consists a junction type object, controlling flow in a channel",
    "type": "object",
    "allOf": [
              "location": {
                "$ref": "https://smart-data-models.github.io/data-models/common-schema.json#/definitions/Location-Commons"
              },
              "position": {
                  "type": "number",
                  "measuredFrom":{
                    "type": "Relationship",
                    "description": ": A sub-Relationship to the ID of a node (e.g., Junction, Sluice gate, Reservoir) from which the relevant position of the cross section is measured",
                    "oneOf":[
                      "$ref": "../Junction/schema.json",
                      "$ref": "../SluiceGate/schema.json",
                      "$ref": "../Reservoir/schema.json",
                    ]
                  }
              },
              {
              "properties": {
                  "type": {
                      "type": "string",
                      "enum": ["regulationGate"],
                      "description": "NGSI-LD Entity Type"
                  },
                  "tag": {
                    "type": "string",
                    "description": ": An optional text used to assign the regulation gate to a category, perhaps one based on age or the served area",
                  },
                  "gateType": {
                    "type": "string",
                    "description": ": The type of the gate: specific values 'SLUICE-GATE' or 'RADIAL-GATE'",
                    "enum": ["Sluice Gate", "Radial Gate"]
                  },
                  "gateWidth": {
                    "type": "number",
                    "description": "The width of the sluice gate (m)",
                  },
                  "gateOpening": {
                    "type": "number",
                    "description": "the height of gate opening (in meters or percentage)",
                    "Unit": {
                      "type": "property",
                      "enum": ["m", "%"]
                    }
                  },
                  "gateBottomElevation": {
                    "type": "number",
                    "description": "Elevation of the bottom (crest) of the gate",
                  },
                  "gateDischargeCoefficient": {
                    "type": "number",
                    "description": "Gate discharge coefficient (m0.5/s) accounts for energy losses as water passes under the gate",
                  },
                  "orificeDischargeCoefficient": {
                    "type": "number",
                    "description": "Orifice discharge coefficient (m0.5/s) accounts for energy losses as water passes under the gate and the downstream tailwater increases to the point at which the gate is no longer flowing freely (downstream submergence is causing a greater upstream headwater for a given flow)",
                  },
                  "flowType": {
                    "type": "string",
                    "enum": ["Overflow", "Free Flow", "Submerged Flow"]
                    "description": "It defines the flow conditions in the gate. It takes the values: 'OVERFLOW' (upstream water level exceeds the weir crest level), 'FREE-FLOW' (water level is lower than gate edge), 'SUBMERGED FLOW' (the rate of flow passing through the gate is regulated by the opening of the gate)",
                  },
                  "description": {
                      "$ref": "../RawWaterManagement-schema.json#/definitions/ngsildProperty"
                  },
                  "id": {
                      "$ref": "../RawWaterManagement-schema.json#/definitions/ngsildProperty"
                  },
                  "cross-section": {
                      "$ref": "../RawWaterManagement-schema.json#/definitions/ngsildProperty"
                  }
              }
            },
            {
              "downstreamNode": {
                "type": "Relationship",
                "oneOf": [
                  "$ref": "../Junction/schema.json",
                  "$ref": "../Channel/schema.json",
                  "$ref": "../Spillway/schema.json",
                  "$ref": "../SluiceGate/schema.json",
                ]
              },
              "upstreamNode": {
                "type": "Relationship",
                "oneOf": [
                  "$ref": "../Junction/schema.json",
                  "$ref": "../Channel/schema.json",
                  "$ref": "../Spillway/schema.json",
                  "$ref": "../SluiceGate/schema.json",
                ]
              },"hasGate":{
                "type": "Relationship",
                "description": "A relationship to the ID label of the gate",
                "$ref": "../RegulationGate/schema.json",
              },
              "hasSpillway":{
                "type": "Relationship",
                "description": "A relationship to the ID label of the spillway",
                "$ref": "../Spillway/schema.json",
              }
            }
          ],
    "required": [
        "id",
        "name",
        "location",
    ]
}
